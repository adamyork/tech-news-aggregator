/**This content is derived. Do not edit.**/
"use strict";var express=require("express"),http=require("http"),https=require("https"),cheerio=require("cheerio"),app=express(),und=require("underscore-node");app.set("view engine","ejs"),app.set("views",__dirname),app.get("/",function(a,b){b.render("index.ejs",{layout:!1})});var _toTitleCase=function(a){var b=a.split(" ");return b=und.map(b,function(a){var b=a.substr(0,1),c=a.substr(1,a.length);return b.toUpperCase()+c}),b.join(" ")},_getResource=function(a,b,c){var d=b.get(a,function(a){var b="";a.on("data",function(a){b+=a}),a.on("end",function(){c(b)}),d.on("error",function(a){c(a.message,!0)})})},_processDom=function(a,b,c){var d=cheerio.load(a),e=c(d);b.send({articles:e})},_mapRequest=function(a,b,c,d,e,f){app.get(a,function(a,g){_getResource({host:b,path:c},d,function(a,c){return c?void g.send({articles:[{href:"",desc:a}]}):void(f?(console.log("useDom",b),_processDom(a,g,e)):g.send({articles:e(a)}))})})},_postProcessHackerNews=function(a){var b=a(".athing td:nth-child(3) a");return b=und.map(b,function(a){var b=a.attribs.href,c="https://news.ycombinator.com/";return{href:-1===b.indexOf("item?id=")?b:c+b,desc:_toTitleCase(a.children[0].data)}})},_postProcessLobsters=function(a){var b=a(".link a");return b=und.map(b,function(a){return{href:a.attribs.href,desc:_toTitleCase(a.children[0].data)}})},_postProcessArstechnica=function(a){var b=a(".post article > a").toArray();return console.log("items",b[0]),b=und.map(b,function(a){var b=a.attribs.href.toString(),c=b.split("/"),d=c[c.length-2],e=d.split("-").join(" ");return{href:a.attribs.href,desc:_toTitleCase(e)}})},_postProcessSlashdot=function(a){var b=a(".story span:first-child a").toArray();return b=und.map(b,function(a){return{href:a.attribs.href,desc:_toTitleCase(a.children[0].data)}})};_mapRequest("/hn","news.ycombinator.com","/",https,_postProcessHackerNews,!0),_mapRequest("/lob","lobste.rs","/",https,_postProcessLobsters,!0),_mapRequest("/ars","arstechnica.com","/",http,_postProcessArstechnica,!0),_mapRequest("/sd","slashdot.org","/",http,_postProcessSlashdot,!0),app.use("/",express["static"](__dirname)),app.listen(8080),console.log("local application server started on port 8080."),console.log("ctrl-c to exit.");
/**End Content**/